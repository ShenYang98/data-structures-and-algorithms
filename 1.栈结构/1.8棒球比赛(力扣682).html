<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<script>
  // 你现在是一场采特殊赛制棒球比赛的记录员。这场比赛由若干回合组成，过去几回合的得分可能会影响以后几回合的得分。

  // 比赛开始时，记录是空白的。你会得到一个记录操作的字符串列表 ops，其中 ops[i] 是你需要记录的第 i 项操作，ops 遵循下述规则：

  // 整数 x - 表示本回合新获得分数 x
  // "+" - 表示本回合新获得的得分是前两次得分的总和。题目数据保证记录此操作时前面总是存在两个有效的分数。
  // "D" - 表示本回合新获得的得分是前一次得分的两倍。题目数据保证记录此操作时前面总是存在一个有效的分数。
  // "C" - 表示前一次得分无效，将其从记录中移除。题目数据保证记录此操作时前面总是存在一个有效的分数。
  // 请你返回记录中所有得分的总和。
  /**
   * @param {string[]} ops
   * @return {number}
   */
  var calPoints = function (ops) {
    for (let i = 0; i < ops.length; i++) {
      if (ops[i] === "C") {
        ops.splice(i - 1, 2)
        i -= 2;
      }
    }
    let res = 0;
    for (let i = 0; i < ops.length; i++) {
      if (ops[i] === "D") {
        ops[i] = +(ops[i - 1] || 0) * 2;
      } else if (ops[i] === "+") {
        ops[i] = +(ops[i - 2] || 0) + +(ops[i - 1] || 0);
      }
      res += +ops[i];
    }
    return res;
  };
  // 测试代码
  let ops =["5","2","C","D","+"];
  console.log(calPoints(ops));
</script>

<body>

</body>

</html>